


<div class="quiz_backg">


    <div class="quiz_text">

        <h2><i><strong>Welcome to {{ @moduleData.module_name }}!</strong></i></h2>


        <button id="show_reading">I want to read something about {{ @moduleData.module_name }} first!</button>
        <div id="reading" style="display:none;">
            <p>{{ @moduleData.module_text }}</p>
        </div>

            <h3><i>Quiz time!</i></h3>



        <!-- ======= MEG-WORK IN PROGRESS ======= -->
        <div class="wrapper">
            <div class="title">Select your option</div>
            <div class="box">
                <label for="" class="option-1">
                <div class="dot"></div>
            </label>
                <label for="" class="option-2">
                    <div class="dot"></div>
                </label>
                <label for="" class="option-3">
                    <div class="dot"></div>
                </label>

                <label for="" class="option-4">
                    <div class="dot"></div>
                </label>
        <!-- ======= MEG-END WORK IN PROGRESS ======= -->




            <repeat group="{{ @questions }}" value="{{ @question }}">
        <div>
            <p>{{ trim(@question.question) }}</p>
            <label class="option"><input type="radio" name="{{ @question.question_id }}" value="1">  A. {{ @question.option_1 }}</label>
            <label class="option"><input type="radio" name="{{ @question.question_id }}" value="2">  B. {{ @question.option_2 }}</label>
            <label class="option"><input type="radio" name="{{ @question.question_id }}" value="3">  C. {{ @question.option_3 }}</label>
            <label class="option"><input type="radio" name="{{ @question.question_id }}" value="4">  D. {{ @question.option_4 }}</label>
            <br>
                <div class="answers" id="{{ @question.question_id }}"></div>

            </div>
            <br>
    </repeat>
    <button id="show_reading" onclick="checkAllAnswers()"> Check all answers </button>


    <<div class="blob">
        <img src="assets/img/blob.svg">
    </div>

</div>



<script src="{{@BASE}}/ui/js/jquery.min.js"></script>
<script>

    $(document).ready(function(){
        $("#show_reading").click(function(){
            $("#reading").slideToggle();
        });
    });

    function checkAllAnswers() {
        for (var i = 1; i <= 5; i++) {
            checkAnswers(i);
        }
    }

    function checkAnswers(qid) {

        $.ajax({
            type: 'GET',
            url: "{{ @BASE }}/quiz/" + qid,
            success: function(response) {
                // https://stackoverflow.com/questions/596351/how-can-i-know-which-radio-button-is-selected-via-jquery
                let selected = $('input[name='+ qid +']:checked').val();

                if (parseInt(selected) === parseInt(response)) {
                    $('#' + qid).html('Correct!');
                } else {
                    switch (parseInt(response)) {
                        case 1:
                            option = "A";
                            break;
                        case 2:
                            option = 'B';
                            break;
                        case 3:
                            option = 'C';
                            break;
                        case 4:
                            option = 'D';
                            break;
                    }
                    $('#' + qid).html('Incorrect! The correct answer is option '+ option);
                }

            },
            failure: function() {
                console.log("failure");
            },
        });
    }
</script>

